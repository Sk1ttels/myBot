{% extends "base.html" %}

{% block title %}–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á #{{ user['id'] }}{% endblock %}

{% block content %}
<div class="card">
    <h1 class="card-title">
        üë§ {{ user['full_name'] or user['username'] or '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á' }}
        {% if user['is_banned'] %}
            <span class="badge badge-danger">–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π</span>
        {% endif %}
    </h1>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
        <div>
            <div style="font-size: 0.9rem; color: #718096; margin-bottom: 0.5rem;">Telegram ID</div>
            <div style="font-size: 1.1rem; font-weight: 600;"><code>{{ user['telegram_id'] }}</code></div>
        </div>
        
        <div>
            <div style="font-size: 0.9rem; color: #718096; margin-bottom: 0.5rem;">Username</div>
            <div style="font-size: 1.1rem; font-weight: 600;">{{ user['username'] or '-' }}</div>
        </div>
        
        <div>
            <div style="font-size: 0.9rem; color: #718096; margin-bottom: 0.5rem;">–¢–µ–ª–µ—Ñ–æ–Ω</div>
            <div style="font-size: 1.1rem; font-weight: 600;">{{ user['phone'] or '-' }}</div>
        </div>
        
        <div>
            <div style="font-size: 0.9rem; color: #718096; margin-bottom: 0.5rem;">–†–æ–ª—å</div>
            <div style="font-size: 1.1rem; font-weight: 600;">
                {% if user['role'] == 'farmer' %}
                    üë®‚Äçüåæ –§–µ—Ä–º–µ—Ä
                {% elif user['role'] == 'buyer' %}
                    üßë‚Äçüíº –ü–æ–∫—É–ø–µ—Ü—å
                {% elif user['role'] == 'logistic' %}
                    üöö –õ–æ–≥—ñ—Å—Ç
                {% else %}
                    {{ user['role'] }}
                {% endif %}
            </div>
        </div>
        
        <div>
            <div style="font-size: 0.9rem; color: #718096; margin-bottom: 0.5rem;">–†–µ–≥—ñ–æ–Ω</div>
            <div style="font-size: 1.1rem; font-weight: 600;">{{ user['region'] or '-' }}</div>
        </div>
        
        <div>
            <div style="font-size: 0.9rem; color: #718096; margin-bottom: 0.5rem;">–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</div>
            <div style="font-size: 1.1rem; font-weight: 600;">{{ user['created_at'][:10] if user['created_at'] else '-' }}</div>
        </div>
    </div>
    
    <div style="margin-top: 2rem; display: flex; gap: 1rem;">
        <a href="{{ url_for('users') }}" class="btn btn-primary">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a>
        {% if user['is_banned'] %}
            <a href="{{ url_for('unban_user', user_id=user['id']) }}" class="btn btn-success">–†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</a>
        {% else %}
            <a href="{{ url_for('ban_user', user_id=user['id']) }}" class="btn btn-danger">–ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</a>
        {% endif %}
    </div>
</div>

<div class="card">
    <h2 class="card-title">üì¶ –õ–æ—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ({{ lots|length }})</h2>
    
    {% if lots %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>–¢–∏–ø</th>
                <th>–ö—É–ª—å—Ç—É—Ä–∞</th>
                <th>–û–±'—î–º</th>
                <th>–¶—ñ–Ω–∞</th>
                <th>–†–µ–≥—ñ–æ–Ω</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–∞—Ç–∞</th>
            </tr>
        </thead>
        <tbody>
            {% for lot in lots %}
            <tr>
                <td><strong>#{{ lot['id'] }}</strong></td>
                <td>
                    {% if lot['type'] == 'sell' %}
                        <span class="badge badge-success">üì§ –ü—Ä–æ–¥–∞–∂</span>
                    {% else %}
                        <span class="badge badge-info">üì• –ö—É–ø—ñ–≤–ª—è</span>
                    {% endif %}
                </td>
                <td>{{ lot['crop'] }}</td>
                <td>{{ lot['volume'] }} —Ç</td>
                <td>
                    {% if lot['price'] %}
                        {{ lot['price'] }} –≥—Ä–Ω/—Ç
                    {% else %}
                        <span style="color: #718096;">–î–æ–≥–æ–≤—ñ—Ä–Ω–∞</span>
                    {% endif %}
                </td>
                <td>{{ lot['region'] }}</td>
                <td>
                    {% if lot['status'] == 'active' %}
                        <span class="badge badge-success">‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π</span>
                    {% else %}
                        <span class="badge badge-danger">üîí –ó–∞–∫—Ä–∏—Ç–∏–π</span>
                    {% endif %}
                </td>
                <td>{{ lot['created_at'][:10] if lot['created_at'] else '-' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div style="text-align: center; padding: 2rem; color: #718096;">
        –£ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø–æ–∫–∏ –Ω–µ–º–∞—î –ª–æ—Ç—ñ–≤
    </div>
    {% endif %}
</div>
{% endblock %}
