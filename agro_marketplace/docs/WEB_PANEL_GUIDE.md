# üåê –í–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üìã –ó–º—ñ—Å—Ç

1. [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è)
2. [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
3. [–í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º](#–≤–∏—Ä—ñ—à–µ–Ω–Ω—è-–ø—Ä–æ–±–ª–µ–º)
4. [–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª](#—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª)
5. [API](#api)

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –®–≤–∏–¥–∫–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
cd agro_marketplace_fixed
pip install Flask==3.0.3
cd src/web_panel
python app.py
```

–í—ñ–¥–∫—Ä–∏–π—Ç–µ: http://127.0.0.1:5000

---

## üîê –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

### –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**–ü–µ—Ä—à–∏–π –∞–¥–º—ñ–Ω —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:**
- –õ–æ–≥—ñ–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: `admin123`

### –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—é –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env`:
```env
ADMIN_USER=your_username
ADMIN_PASS=your_password
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∞–¥–º—ñ–Ω—ñ–≤

```python
import sqlite3
import hashlib

def create_admin(username, password):
    password_hash = hashlib.sha256(password.encode()).hexdigest()
    
    conn = sqlite3.connect('../../data/agro_bot.db')
    cursor = conn.cursor()
    
    cursor.execute(
        "INSERT INTO web_admins (username, password_hash) VALUES (?, ?)",
        (username, password_hash)
    )
    
    conn.commit()
    conn.close()
    print(f"‚úÖ –ê–¥–º—ñ–Ω–∞ {username} —Å—Ç–≤–æ—Ä–µ–Ω–æ!")

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
create_admin("manager", "secure_password_123")
```

---

## üêõ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù—ñ—á–æ–≥–æ –Ω–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è" –ø—Ä–∏ –≤—Ö–æ–¥—ñ

**–°–∏–º–ø—Ç–æ–º–∏:**
- –í–≤–æ–¥–∏—Ç–µ –ª–æ–≥—ñ–Ω/–ø–∞—Ä–æ–ª—å
- –ù–∞—Ç–∏—Å–∫–∞—î—Ç–µ "–£–≤—ñ–π—Ç–∏"
- –ù—ñ—á–æ–≥–æ –Ω–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è, —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:**
–°—Ç–∞—Ä–∏–π –∫–æ–¥ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞–≤ –∞–¥–º—ñ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —ñ –Ω–µ –ø–æ–∫–∞–∑—É–≤–∞–≤ –ø–æ–º–∏–ª–∫–∏.

**–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø (–≤–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ):**

1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ –∞–¥–º—ñ–Ω–∞
2. ‚úÖ Flash-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –ø–æ–º–∏–ª–æ–∫
3. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ö–µ—à–∏–Ω–≥ –ø–∞—Ä–æ–ª—ñ–≤
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∞–¥–º—ñ–Ω–∞

**–©–æ —Ä–æ–±–∏—Ç–∏:**

1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ **–í–ò–ü–†–ê–í–õ–ï–ù–£** –≤–µ—Ä—Å—ñ—é (agro_marketplace_fixed)

2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `.env`:
   ```env
   ADMIN_USER=admin
   ADMIN_PASS=admin123
   ```

3. –í–∏–¥–∞–ª—ñ—Ç—å —Å—Ç–∞—Ä—É –ë–î —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å:
   ```bash
   rm data/agro_bot.db
   cd src/web_panel
   python app.py
   ```

4. –í –∫–æ–Ω—Å–æ–ª—ñ –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—å:
   ```
   ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –∞–¥–º—ñ–Ω–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: admin / admin123
   ```

5. –°–ø—Ä–æ–±—É–π—Ç–µ —É–≤—ñ–π—Ç–∏ –∑–Ω–æ–≤—É

---

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ–≤—ñ—Ä–Ω–∏–π –ª–æ–≥—ñ–Ω –∞–±–æ –ø–∞—Ä–æ–ª—å"

**–†—ñ—à–µ–Ω–Ω—è 1: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ—î—Å—Ç—Ä**
- –õ–æ–≥—ñ–Ω —á—É—Ç–ª–∏–≤–∏–π –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É
- –°–ø—Ä–æ–±—É–π—Ç–µ `admin` (–º–∞–ª–∏–º–∏ –ª—ñ—Ç–µ—Ä–∞–º–∏)

**–†—ñ—à–µ–Ω–Ω—è 2: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–æ–±—ñ–ª–∏**
- –£–Ω–∏–∫–∞–π—Ç–µ –ø—Ä–æ–±—ñ–ª—ñ–≤ –¥–æ/–ø—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É —Ç–∞ –ø–∞—Ä–æ–ª—è

**–†—ñ—à–µ–Ω–Ω—è 3: –°–∫–∏–Ω—å—Ç–µ –ë–î**
```bash
rm data/agro_bot.db
python src/web_panel/app.py
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä:**
```bash
cd src/web_panel
python app.py
```

–ú–∞—î –±—É—Ç–∏:
```
üåæ Agro Marketplace - –í–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
============================================================
üìç URL: http://127.0.0.1:5000
üë§ –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: admin / admin123
============================================================
```

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—Ç:**
- –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 5000
- –Ø–∫—â–æ –∑–∞–π–Ω—è—Ç–∏–π, –∑–º—ñ–Ω—ñ—Ç—å –≤ `.env`:
  ```env
  WEB_PORT=8080
  ```

---

### –ü—Ä–æ–±–ª–µ–º–∞: ImportError –∞–±–æ ModuleNotFoundError

**–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
```bash
pip install Flask==3.0.3
```

**–ê–±–æ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
```bash
pip install -r requirements.txt
```

---

## üìä –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### –î–∞—à–±–æ—Ä–¥

**–©–æ –ø–æ–∫–∞–∑—É—î:**
- –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ê–∫—Ç–∏–≤–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- –ù–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
- –ê–∫—Ç–∏–≤–Ω—ñ –ª–æ—Ç–∏
- –†–æ–∑–ø–æ–¥—ñ–ª –∑–∞ —Ä–æ–ª—è–º–∏

**–î–æ—Å—Ç—É–ø:** http://127.0.0.1:5000/

---

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ —Ä–æ–ª—è–º–∏
- –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è/—Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- –ü–µ—Ä–µ–≥–ª—è–¥ –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó

**–î–æ—Å—Ç—É–ø:** http://127.0.0.1:5000/users

**–î—ñ—ó:**
```python
# –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏
GET /users/ban/<user_id>

# –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏
GET /users/unban/<user_id>

# –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
GET /users/<user_id>
```

---

### –õ–æ—Ç–∏

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –ü–µ—Ä–µ–≥–ª—è–¥ –≤—Å—ñ—Ö –ª–æ—Ç—ñ–≤/–∑–∞—è–≤–æ–∫
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ —Ç–∏–ø–æ–º (–ø—Ä–æ–¥–∞–∂/–∫—É–ø—ñ–≤–ª—è)
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤–ª–∞—Å–Ω–∏–∫–∞
- –°—Ç–∞—Ç—É—Å –ª–æ—Ç–∞

**–î–æ—Å—Ç—É–ø:** http://127.0.0.1:5000/lots

---

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

**–í —Ä–æ–∑—Ä–æ–±—Ü—ñ**
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

**–î–æ—Å—Ç—É–ø:** http://127.0.0.1:5000/settings

---

## üîå API

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```http
GET /api/stats
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "users": {
    "total": 150,
    "active": 145,
    "banned": 5
  },
  "lots": {
    "total": 89,
    "active": 67
  }
}
```

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
fetch('/api/stats')
  .then(res => res.json())
  .then(data => {
    console.log('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:', data.users.total);
    console.log('–ê–∫—Ç–∏–≤–Ω–∏—Ö –ª–æ—Ç—ñ–≤:', data.lots.active);
  });
```

---

## üîí –ë–µ–∑–ø–µ–∫–∞

### –ü–∞—Ä–æ–ª—ñ

‚úÖ –ü–∞—Ä–æ–ª—ñ —Ö–µ—à—É—é—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é SHA-256
‚úÖ –ü–∞—Ä–æ–ª—ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ
‚úÖ –°–µ—Å—ñ—ó –∑–∞—Ö–∏—â–µ–Ω—ñ FLASK_SECRET

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—å –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:**
   ```env
   ADMIN_PASS=your_strong_password_here
   ```

2. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–∫–ª–∞–¥–Ω–∏–π FLASK_SECRET:**
   ```python
   import secrets
   print(secrets.token_hex(32))
   ```

3. **–û–±–º–µ–∂—Ç–µ –¥–æ—Å—Ç—É–ø:**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ
   - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ firewall
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ reverse proxy (nginx)

---

## üöÄ –î–µ–ø–ª–æ–π —É –ø—Ä–æ–¥–∞–∫—à–µ–Ω

### –ó Gunicorn

```bash
pip install gunicorn

gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

### –ó nginx

nginx.conf:
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### –ó Docker

Dockerfile:
```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

CMD ["python", "src/web_panel/app.py"]
```

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –¢–∞–±–ª–∏—Ü—è web_admins

```sql
CREATE TABLE web_admins (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    email TEXT,
    is_active INTEGER DEFAULT 1,
    last_login TEXT,
    created_at TEXT DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü—è users

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    telegram_id INTEGER UNIQUE NOT NULL,
    username TEXT,
    full_name TEXT,
    phone TEXT,
    role TEXT DEFAULT 'user',
    region TEXT,
    is_banned INTEGER DEFAULT 0,
    created_at TEXT DEFAULT CURRENT_TIMESTAMP
);
```

---

## üé® –ö–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—è

### –ó–º—ñ–Ω–∞ –ª–æ–≥–æ—Ç–∏–ø—É

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `templates/login.html`:
```html
<div class="logo-icon">üåæ</div> <!-- –ó–º—ñ–Ω—ñ—Ç—å –µ–º–æ–¥–∑—ñ -->
<div class="logo-text">–í–∞—à–∞ –ù–∞–∑–≤–∞</div>
```

### –ó–º—ñ–Ω–∞ –∫–æ–ª—å–æ—Ä—ñ–≤

–£ —Ñ–∞–π–ª–∞—Ö —à–∞–±–ª–æ–Ω—ñ–≤ –∑–º—ñ–Ω—ñ—Ç—å:
```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
/* –ù–∞ –≤–∞—à –≥—Ä–∞–¥—ñ—î–Ω—Ç */
background: linear-gradient(135deg, #your-color-1 0%, #your-color-2 100%);
```

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

**–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è:**

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Flask –≤ –∫–æ–Ω—Å–æ–ª—ñ
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `logs/bot.log`
3. –í–∏–¥–∞–ª—ñ—Ç—å –ë–î —ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–Ω–æ–≤–æ
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

**–ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ë–î
python3 -c "import sqlite3; conn = sqlite3.connect('data/agro_bot.db'); print('Admins:', conn.execute('SELECT * FROM web_admins').fetchall())"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Flask
python3 -c "import flask; print(flask.__version__)"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑ —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞
rm data/agro_bot.db
python src/web_panel/app.py
```

---

**–£—Å–ø—ñ—à–Ω–æ—ó —Ä–æ–±–æ—Ç–∏! üåæ**
